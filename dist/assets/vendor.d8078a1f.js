function k(){}function et(t,e){for(const n in e)t[n]=e[n];return t}function nt(t){return t()}function J(){return Object.create(null)}function S(t){t.forEach(nt)}function st(t){return typeof t=="function"}function rt(t,e){return t!=t?e==e:t!==e||t&&typeof t=="object"||typeof t=="function"}let N;function Nt(t,e){return N||(N=document.createElement("a")),N.href=e,t===N.href}function gt(t){return Object.keys(t).length===0}function bt(t,...e){if(t==null)return k;const n=t.subscribe(...e);return n.unsubscribe?()=>n.unsubscribe():n}function Dt(t,e){t.appendChild(e)}function Y(t,e,n){t.insertBefore(e,n||null)}function z(t){t.parentNode.removeChild(t)}function Pt(t){return document.createElement(t)}function ot(t){return document.createTextNode(t)}function It(){return ot(" ")}function B(){return ot("")}function Tt(t,e,n){n==null?t.removeAttribute(e):t.getAttribute(e)!==n&&t.setAttribute(e,n)}function yt(t){return Array.from(t.childNodes)}function wt(t,e,n=!1){const o=document.createEvent("CustomEvent");return o.initCustomEvent(t,n,!1,e),o}let C;function q(t){C=t}function W(){if(!C)throw new Error("Function called outside component initialization");return C}function kt(t){W().$$.after_update.push(t)}function Et(t){W().$$.on_destroy.push(t)}function $t(){const t=W();return(e,n)=>{const o=t.$$.callbacks[e];if(o){const c=wt(e,n);o.slice().forEach(u=>{u.call(t,c)})}}}function K(t,e){const n=t.$$.callbacks[e.type];n&&n.slice().forEach(o=>o.call(this,e))}const O=[],Q=[],P=[],V=[],it=Promise.resolve();let M=!1;function ct(){M||(M=!0,it.then(ut))}function xt(){return ct(),it}function U(t){P.push(t)}const F=new Set;let D=0;function ut(){const t=C;do{for(;D<O.length;){const e=O[D];D++,q(e),jt(e.$$)}for(q(null),O.length=0,D=0;Q.length;)Q.pop()();for(let e=0;e<P.length;e+=1){const n=P[e];F.has(n)||(F.add(n),n())}P.length=0}while(O.length);for(;V.length;)V.pop()();M=!1,F.clear(),q(t)}function jt(t){if(t.fragment!==null){t.update(),S(t.before_update);const e=t.dirty;t.dirty=[-1],t.fragment&&t.fragment.p(t.ctx,e),t.after_update.forEach(U)}}const I=new Set;let E;function X(){E={r:0,c:[],p:E}}function G(){E.r||S(E.c),E=E.p}function $(t,e){t&&t.i&&(I.delete(t),t.i(e))}function v(t,e,n,o){if(t&&t.o){if(I.has(t))return;I.add(t),E.c.push(()=>{I.delete(t),o&&(n&&t.d(1),o())}),t.o(e)}}function lt(t,e){const n={},o={},c={$$scope:1};let u=t.length;for(;u--;){const l=t[u],r=e[u];if(r){for(const s in l)s in r||(o[s]=1);for(const s in r)c[s]||(n[s]=r[s],c[s]=1);t[u]=r}else for(const s in l)c[s]=1}for(const l in o)l in n||(n[l]=void 0);return n}function ft(t){return typeof t=="object"&&t!==null?t:{}}function T(t){t&&t.c()}function R(t,e,n,o){const{fragment:c,on_mount:u,on_destroy:l,after_update:r}=t.$$;c&&c.m(e,n),o||U(()=>{const s=u.map(nt).filter(st);l?l.push(...s):S(s),t.$$.on_mount=[]}),r.forEach(U)}function A(t,e){const n=t.$$;n.fragment!==null&&(S(n.on_destroy),n.fragment&&n.fragment.d(e),n.on_destroy=n.fragment=null,n.ctx=[])}function vt(t,e){t.$$.dirty[0]===-1&&(O.push(t),ct(),t.$$.dirty.fill(0)),t.$$.dirty[e/31|0]|=1<<e%31}function St(t,e,n,o,c,u,l,r=[-1]){const s=C;q(t);const i=t.$$={fragment:null,ctx:null,props:u,update:k,not_equal:c,bound:J(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(e.context||(s?s.$$.context:[])),callbacks:J(),dirty:r,skip_bound:!1,root:e.target||s.$$.root};l&&l(i.root);let h=!1;if(i.ctx=n?n(t,e.props||{},(m,y,..._)=>{const g=_.length?_[0]:y;return i.ctx&&c(i.ctx[m],i.ctx[m]=g)&&(!i.skip_bound&&i.bound[m]&&i.bound[m](g),h&&vt(t,m)),y}):[],i.update(),h=!0,S(i.before_update),i.fragment=o?o(i.ctx):!1,e.target){if(e.hydrate){const m=yt(e.target);i.fragment&&i.fragment.l(m),m.forEach(z)}else i.fragment&&i.fragment.c();e.intro&&$(t.$$.fragment),R(t,e.target,e.anchor,e.customElement),ut()}q(s)}class Ot{$destroy(){A(this,1),this.$destroy=k}$on(e,n){const o=this.$$.callbacks[e]||(this.$$.callbacks[e]=[]);return o.push(n),()=>{const c=o.indexOf(n);c!==-1&&o.splice(c,1)}}$set(e){this.$$set&&!gt(e)&&(this.$$.skip_bound=!0,this.$$set(e),this.$$.skip_bound=!1)}}const j=[];function at(t,e){return{subscribe:dt(t,e).subscribe}}function dt(t,e=k){let n;const o=new Set;function c(r){if(rt(t,r)&&(t=r,n)){const s=!j.length;for(const i of o)i[1](),j.push(i,t);if(s){for(let i=0;i<j.length;i+=2)j[i][0](j[i+1]);j.length=0}}}function u(r){c(r(t))}function l(r,s=k){const i=[r,s];return o.add(i),o.size===1&&(n=e(c)||k),r(t),()=>{o.delete(i),o.size===0&&(n(),n=null)}}return{set:c,update:u,subscribe:l}}function ht(t,e,n){const o=!Array.isArray(t),c=o?[t]:t,u=e.length<2;return at(n,l=>{let r=!1;const s=[];let i=0,h=k;const m=()=>{if(i)return;h();const _=e(o?s[0]:s,l);u?l(_):h=st(_)?_:k},y=c.map((_,g)=>bt(_,L=>{s[g]=L,i&=~(1<<g),r&&m()},()=>{i|=1<<g}));return r=!0,m(),function(){S(y),h()}})}function qt(t,e){if(t instanceof RegExp)return{keys:!1,pattern:t};var n,o,c,u,l=[],r="",s=t.split("/");for(s[0]||s.shift();c=s.shift();)n=c[0],n==="*"?(l.push("wild"),r+="/(.*)"):n===":"?(o=c.indexOf("?",1),u=c.indexOf(".",1),l.push(c.substring(1,~o?o:~u?u:c.length)),r+=!!~o&&!~u?"(?:/([^/]+?))?":"/([^/]+?)",~u&&(r+=(~o?"?":"")+"\\"+c.substring(u))):r+="/"+c;return{keys:l,pattern:new RegExp("^"+r+(e?"(?=$|/)":"/?$"),"i")}}function Ct(t){let e,n,o;const c=[t[2]];var u=t[0];function l(r){let s={};for(let i=0;i<c.length;i+=1)s=et(s,c[i]);return{props:s}}return u&&(e=new u(l()),e.$on("routeEvent",t[7])),{c(){e&&T(e.$$.fragment),n=B()},m(r,s){e&&R(e,r,s),Y(r,n,s),o=!0},p(r,s){const i=s&4?lt(c,[ft(r[2])]):{};if(u!==(u=r[0])){if(e){X();const h=e;v(h.$$.fragment,1,0,()=>{A(h,1)}),G()}u?(e=new u(l()),e.$on("routeEvent",r[7]),T(e.$$.fragment),$(e.$$.fragment,1),R(e,n.parentNode,n)):e=null}else u&&e.$set(i)},i(r){o||(e&&$(e.$$.fragment,r),o=!0)},o(r){e&&v(e.$$.fragment,r),o=!1},d(r){r&&z(n),e&&A(e,r)}}}function Rt(t){let e,n,o;const c=[{params:t[1]},t[2]];var u=t[0];function l(r){let s={};for(let i=0;i<c.length;i+=1)s=et(s,c[i]);return{props:s}}return u&&(e=new u(l()),e.$on("routeEvent",t[6])),{c(){e&&T(e.$$.fragment),n=B()},m(r,s){e&&R(e,r,s),Y(r,n,s),o=!0},p(r,s){const i=s&6?lt(c,[s&2&&{params:r[1]},s&4&&ft(r[2])]):{};if(u!==(u=r[0])){if(e){X();const h=e;v(h.$$.fragment,1,0,()=>{A(h,1)}),G()}u?(e=new u(l()),e.$on("routeEvent",r[6]),T(e.$$.fragment),$(e.$$.fragment,1),R(e,n.parentNode,n)):e=null}else u&&e.$set(i)},i(r){o||(e&&$(e.$$.fragment,r),o=!0)},o(r){e&&v(e.$$.fragment,r),o=!1},d(r){r&&z(n),e&&A(e,r)}}}function At(t){let e,n,o,c;const u=[Rt,Ct],l=[];function r(s,i){return s[1]?0:1}return e=r(t),n=l[e]=u[e](t),{c(){n.c(),o=B()},m(s,i){l[e].m(s,i),Y(s,o,i),c=!0},p(s,[i]){let h=e;e=r(s),e===h?l[e].p(s,i):(X(),v(l[h],1,1,()=>{l[h]=null}),G(),n=l[e],n?n.p(s,i):(n=l[e]=u[e](s),n.c()),$(n,1),n.m(o.parentNode,o))},i(s){c||($(n),c=!0)},o(s){v(n),c=!1},d(s){l[e].d(s),s&&z(o)}}}function Z(){const t=window.location.href.indexOf("#/");let e=t>-1?window.location.href.substr(t+1):"/";const n=e.indexOf("?");let o="";return n>-1&&(o=e.substr(n+1),e=e.substr(0,n)),{location:e,querystring:o}}const H=at(null,function(e){e(Z());const n=()=>{e(Z())};return window.addEventListener("hashchange",n,!1),function(){window.removeEventListener("hashchange",n,!1)}});ht(H,t=>t.location);ht(H,t=>t.querystring);const tt=dt(void 0);function Lt(t,e,n){let{routes:o={}}=e,{prefix:c=""}=e,{restoreScrollState:u=!1}=e;class l{constructor(f,a){if(!a||typeof a!="function"&&(typeof a!="object"||a._sveltesparouter!==!0))throw Error("Invalid component object");if(!f||typeof f=="string"&&(f.length<1||f.charAt(0)!="/"&&f.charAt(0)!="*")||typeof f=="object"&&!(f instanceof RegExp))throw Error('Invalid value for "path" argument - strings must start with / or *');const{pattern:b,keys:p}=qt(f);this.path=f,typeof a=="object"&&a._sveltesparouter===!0?(this.component=a.component,this.conditions=a.conditions||[],this.userData=a.userData,this.props=a.props||{}):(this.component=()=>Promise.resolve(a),this.conditions=[],this.props={}),this._pattern=b,this._keys=p}match(f){if(c){if(typeof c=="string")if(f.startsWith(c))f=f.substr(c.length)||"/";else return null;else if(c instanceof RegExp){const w=f.match(c);if(w&&w[0])f=f.substr(w[0].length)||"/";else return null}}const a=this._pattern.exec(f);if(a===null)return null;if(this._keys===!1)return a;const b={};let p=0;for(;p<this._keys.length;){try{b[this._keys[p]]=decodeURIComponent(a[p+1]||"")||null}catch{b[this._keys[p]]=null}p++}return b}async checkConditions(f){for(let a=0;a<this.conditions.length;a++)if(!await this.conditions[a](f))return!1;return!0}}const r=[];o instanceof Map?o.forEach((d,f)=>{r.push(new l(f,d))}):Object.keys(o).forEach(d=>{r.push(new l(d,o[d]))});let s=null,i=null,h={};const m=$t();async function y(d,f){await xt(),m(d,f)}let _=null,g=null;u&&(g=d=>{d.state&&d.state.__svelte_spa_router_scrollY?_=d.state:_=null},window.addEventListener("popstate",g),kt(()=>{_?window.scrollTo(_.__svelte_spa_router_scrollX,_.__svelte_spa_router_scrollY):window.scrollTo(0,0)}));let L=null,x=null;const _t=H.subscribe(async d=>{L=d;let f=0;for(;f<r.length;){const a=r[f].match(d.location);if(!a){f++;continue}const b={route:r[f].path,location:d.location,querystring:d.querystring,userData:r[f].userData,params:a&&typeof a=="object"&&Object.keys(a).length?a:null};if(!await r[f].checkConditions(b)){n(0,s=null),x=null,y("conditionsFailed",b);return}y("routeLoading",Object.assign({},b));const p=r[f].component;if(x!=p){p.loading?(n(0,s=p.loading),x=p,n(1,i=p.loadingParams),n(2,h={}),y("routeLoaded",Object.assign({},b,{component:s,name:s.name,params:i}))):(n(0,s=null),x=null);const w=await p();if(d!=L)return;n(0,s=w&&w.default||w),x=p}a&&typeof a=="object"&&Object.keys(a).length?n(1,i=a):n(1,i=null),n(2,h=r[f].props),y("routeLoaded",Object.assign({},b,{component:s,name:s.name,params:i})).then(()=>{tt.set(i)});return}n(0,s=null),x=null,tt.set(void 0)});Et(()=>{_t(),g&&window.removeEventListener("popstate",g)});function pt(d){K.call(this,t,d)}function mt(d){K.call(this,t,d)}return t.$$set=d=>{"routes"in d&&n(3,o=d.routes),"prefix"in d&&n(4,c=d.prefix),"restoreScrollState"in d&&n(5,u=d.restoreScrollState)},t.$$.update=()=>{t.$$.dirty&32&&(history.scrollRestoration=u?"manual":"auto")},[s,i,h,o,c,u,pt,mt]}class zt extends Ot{constructor(e){super();St(this,e,Lt,At,rt,{routes:3,prefix:4,restoreScrollState:5})}}export{zt as R,Ot as S,It as a,Tt as b,Y as c,Dt as d,Pt as e,z as f,T as g,Nt as h,St as i,$ as j,v as k,A as l,R as m,k as n,rt as s,ot as t};
